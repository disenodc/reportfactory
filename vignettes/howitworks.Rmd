---
title: "How reportfactory works"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{How reportfactory works}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

{reportfactory} enforces time-stamped naming conventions and newly generated outputs are stored in dedicated time-stamped folders. It provides functions for doing so to all documents, or only the most recent. 

```{r setup}
library(reportfactory)
```

## Components of a factory

A report factory is a folder with the following structure (see next section for
creating new factories):

- `report_sources/`: folder storing `.Rmd` reports (possibly in sub-folders);
  files **must be** named using the convention `[report_base_name]_[yyyy-mm-dd].Rmd`; the
  date format is very important as it will be used for identifying the latest
  report version; *examples*: `sitrep_ebola_2018-06-13`,
  `incidence_curve_flu_2017-12-23`; **note** this folder should not contain any
  outputs of the `.Rmd` files!
  
- `report_outputs`: outputs of the reports, automatically generated by the
  factory, in dedicated folders named as
  `[report_base_name]_[yyyy-mm-dd]/compiled_[timestamp]/`
  
## Key functions

- **`new_factory()`**: will create a new report factory, by default adding examples
  of reports ready for compilation
- **`list_reports()`**: will list available reports
- **`list_outputs()`**: will list available outputs
- **`list_deps()`**: will list packages needed in the reports; use the option
  `missing = TRUE` to list only packages that are missing and need to be
  installed
- **`install_deps()`**: will install packages needed in the reports; by default,
  only install missing packages; use `update = TRUE` to force the install of all
  packages
- **`validate_factory()`**: will check that the factory is valid, that all
  report names are unique, etc.
- **`compile_report()`**: compiles one specific report (name to be
  matched against the output of `list_reports()`
- **`update_reports()`**: compiles every report, using by default the latest
  version of each report; use the options `all = TRUE` to compile all reports
  (including old ones)